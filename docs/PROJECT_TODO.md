# PROJECT_TODO

> 撱箄降??ChatGPT ?蝬剛風?遢皜嚗?> Windsurf / Cursor ???扳?摰? TODO ?撖虫???
## 閬?

- 瘥?璇遙?????蝣箝?- 瘥?璇遙????嚗?  - ???docs嚗??潔?皞???  - 閬耨?寧?瑼?頝臬???  - ?迂靽格?????虜??TODO ?憛???  - 撽?孵?嚗葫閰艾撓?箸?????瑼Ｘ嚗?
---

## TODO ?”嚗?憪???

### 1. 撖虫? crawl 撌亙嚗歇摰?蝭?嚗?
- ?????摰?
- 隤芣?嚗?  - 瑼?嚗?    - `tools/crawl/crawl-ctworld.ts`
    - `tools/crawl/filesystem-inventory.ts`
    - `tools/crawl/diff-crawl-vs-files.ts`
    - `package.json`嚗cripts: `crawl:ctworld` / `inventory:fs` / `diff:crawl-vs-fs`嚗?  - 閬嚗?    - `docs/crawl-and-inventory.md`
    - `docs/CRAWL_TOOLS_SETUP.md`
  - ???嚗?    - 敺?`https://www.ctworld.org` ??`/sitemap.htm` ?箇??BFS ?祈嚗靽? `ctworld.org` / `ctworld.org.tw` 蝬脣???    - ?Ｗ嚗?      - `data/crawl/crawled-urls.json` / `crawled-urls.csv`嚗?銝?脩???
      - `data/crawl/all-files.json` / `all-files.csv`嚗璈?docroot inventory嚗?      - `data/crawl/missing-from-crawl.csv` / `extra-from-crawl.csv`嚗榆?啣銵剁?
  - ?迂靽格蝭?嚗歇摰?嚗??芯???嚗?    - ?? `tools/crawl/*.ts` ?抒?撖虫?蝝啁???CLI ?閫??嚗??孵? public API ??scripts ?迂??  - 撽?孵?嚗?    - ?賢?祆????瑁?嚗?      - `npm run crawl:ctworld`
      - `npm run inventory:fs`
      - `npm run diff:crawl-vs-files`
    - ?Ｗ??JSON / CSV 瑼撘泵??`crawl-and-inventory.md` 閬??  - 鞎痊鈭綽?ChatGPT嚗??潘?撉冽嚗? Windsurf嚗祕雿?嚗?雿??游????塚?

---

### 2. 撖虫? HTML?nyContent嚗eaching

- ???漎?撠??
- 隤芣?嚗?  - ??瑼?嚗?    - `tools/convert/html-to-anycontent-teaching.ts`嚗 ChatGPT ?Ｙ?撉冽嚗?    - `src/types/anycontent-teaching.ts`嚗eaching schema 摰儔嚗歇摮?航?撘瘀?
  - 閬嚗?    - `docs/HTML_TO_MARKDOWN_RULES_V4.md`
    - `docs/CONTENT_SCHEMA.md`
    - `docs/COMPLETE_PROJECT_WORKFLOW.md`嚗擃?蝔?
  - ?嚗?    - 撠?teaching 憿? HTML 頧? `TeachingContent` / `AnyContent` JSON嚗?      - 甇?Ⅱ??璅??惜?蜓?挾?賬??刻??”??      - ?菜葫銝行?Ｗ?隤?憛?憛怠 `ct_verse_block_markdown` 蝑?隤??雿?      - 靘????‵??`featured_image`?featured_image_caption`?gallery_items[]`??  - Windsurf 雿輻隤芣?嚗?    - ?芾靽格 `html-to-anycontent-teaching.ts` 銝剜?閮?TODO ??憛?    - 銝靽格 `CONTENT_SCHEMA` 銝剖?蝢拍????雿?蝔晞?  - 撽?孵?嚗摰?嚗?    - 皞? 2?? ?誨銵冽?teaching HTML 蝭?嚗???撠撓??JSON ???潭?虫??氬?    - 敺??航?銝?`tests/html-to-anycontent-teaching.spec.ts` ??snapshot 皜祈岫??
---

### 3. 撖虫? zh-TW ??zh-CN pipeline

- ???漎?撠??
- 隤芣?嚗?  - ??瑼?嚗?    - `tools/convert/generate-zh-cn-from-zh-tw.ts`
  - 閬嚗?    - `docs/ZH_TW_TO_ZH_CN_PIPELINE.md`
    - `docs/CONTENT_SCHEMA.md`嚗?雿? `Language` 摰儔嚗?  - ?嚗?    - 霈??zh-TW ??AnyContent JSON嚗?憒?`data/zh-tw/**/*.json`嚗?    - 雿輻 OpenCC嚗?蝑?撌亙嚗???甈????陛頧?嚗?      - ? `post_title`, `post_excerpt`, `body_markdown`嚗誑???訾葉??`meta` ??`seo` ??甈???    - 銝??湛?ID / URL / ?詨? / enum 憿?雿? `external_id`??    - 頛詨撠? zh-CN JSON嚗蒂蝬剜? `multilingual` ?鞈?甇?Ⅱ??  - Windsurf 雿輻隤芣?嚗?    - ?祕雿?`generate-zh-cn-from-zh-tw.ts` 銝剜?摰?TODO ?憛?    - 銝耨??`Language` union ??`AnyContent` schema嚗?雿??隞?docs ?箸???  - 撽?孵?嚗摰?嚗?    - 雿輻撠? zh-TW JSON 蝭?嚗炎??zh-CN ?嚗?      - ??撌脫迤蝣箄??箇陛擃?      - 蝯?嚗?雿??嚗??摰銝?氬?      - ID / URL / enum ?芾◤隤斗??
---

## T 蝟餃?隞餃?嚗 ChatGPT 蝬剛風嚗?
> T-XXXX ?其?璅??犖璈?雿?撠郊撽??嫣噶?晷蝯?Windsurf??
### ??T-0001 teaching-from-legacy: 撠?htmlToMarkdown ??verses ????TeachingMeta ??甈?嚗歇摰?嚗?
- ???
  - 撌脩 Windsurf ??2025-12-08 摰?撠?teaching-from-legacy ??隤?雿?撠祕雿?  - 撠?皜祈岫嚗tests/adapters/teaching-from-legacy.spec.ts`嚗歇?啣?銝阡???- ?賊?蝔?瑼?
  - `src/html/html-to-markdown.ts`
  - `src/html/legacy-html-types.ts`
  - `src/types/anycontent-teaching.ts`
  - `src/adapters/teaching-from-legacy.ts`
- ?賊?皜祈岫嚗?  - `tests/html/html-to-markdown.spec.ts`
  - `tests/adapters/teaching-from-legacy.spec.ts`
- ?賊?隤芣?????
  - `docs/Windsurf_ChatGPT_NOTES.md`
  - `docs/terminal_logs/T-0001_teaching-from-legacy_vitest_fail.txt`
  - `docs/terminal_logs/T-0001_teaching-from-legacy_vitest_pass.txt`
- 蝯???嚗?  - `htmlToMarkdown` 撠 sutra 閬??????園???`verses: string[]`??  - `teaching-from-legacy` adapter ????`verses` 閮剖? TeachingMeta ??隤?雿?
    - `ct_has_dharma_verse`
    - `ct_verse_block_markdown`
    - `ct_verse_type`
    - `ct_verse_lang`
  - 銝憯??TeachingContent / AnyContent schema contract??
---

### ??T-0002 AnyContent ?嗡? post_type ?嚗ews / magazine contract嚗歇摰?嚗?
- ???
  - 撌脩 Windsurf 靘 T-0002 閬摰?撖虫?嚗蒂?? TypeScript ?瑼Ｘ??- ?啣? / ?湔???交?嚗?  - `src/types/anycontent-teaching.ts`
  - `src/types/anycontent-news.ts`
  - `src/types/anycontent-magazine.ts`
  - `src/types/anycontent.ts`
- 隞餃?閬靘?嚗?  - `docs/PROJECT_TODO.md`嚗-0002 畾菔嚗?  - `docs/CONTENT_SCHEMA.md`
- ?賊?隤芣?????
  - `docs/Windsurf_ChatGPT_NOTES.md`
  - `docs/terminal_logs/T-0002_anycontent_types_tsc_pass.txt`
- 蝯???嚗?  - AnyContent ??contract ??曉歇? teaching / news / magazine 銝車 post_type??  - news / magazine ??meta / content ?撌脫?蝣箏?蝢抬??芰憯??`Language` union ??`AnyContentBase`??
---

### ??T-0003 news-from-legacy: 撱箇? NewsContent adapter 撉冽嚗inimal mapping嚗?撌脣???

- ???
  - 撌脩 Windsurf 靘 T-0003 閬摰?撖虫?嚗蒂?? Vitest 皜祈岫??- ?啣? / ?湔??撘?嚗?  - `src/html/html-to-markdown.ts`
  - `src/html/legacy-html-types.ts`
  - `src/types/anycontent-teaching.ts`
  - `src/types/anycontent-news.ts`
  - `src/types/anycontent-magazine.ts`
  - `src/types/anycontent.ts`
  - `src/adapters/teaching-from-legacy.ts`
  - `src/adapters/news-from-legacy.ts`
- ?啣? / ?湔?葫閰行?嚗?  - `tests/html/html-to-markdown.spec.ts`
  - `tests/adapters/teaching-from-legacy.spec.ts`
  - `tests/adapters/news-from-legacy.spec.ts`
- 鈭斗??蝔牧??嚗?  - `docs/WORKFLOW_CHATGPT_GITHUB_WINDSURF.md`
  - `docs/PROJECT_TODO.md`
  - `docs/Windsurf_ChatGPT_NOTES.md`
- ?祆活?瑼Ｘ?葫閰?log嚗?  - `docs/terminal_logs/T-0001_teaching-from-legacy_vitest_fail.txt`
  - `docs/terminal_logs/T-0001_teaching-from-legacy_vitest_pass.txt`
  - `docs/terminal_logs/T-0002_anycontent_types_tsc_pass.txt`
  - `docs/terminal_logs/T-0003_news-from-legacy_vitest_pass.txt`
- 蝯???嚗?  - 撌脫? minimal ???`news-from-legacy` adapter ???葫閰佗??賢? legacy HTML + htmlToMarkdownResult 撱箇??箸??`NewsContent`??  - teaching / news / magazine adapter / ?銋??撌脣?甇乩葡韏瘀?銋??舫郊?游? news ??暺?甈? mapping??
---

### ??T-0004 magazine-from-legacy: 撱箇? MagazineContent adapter 撉冽嚗inimal mapping嚗?撌脣???

- ???
  - 撌脩 Windsurf 靘 T-0004 閬摰?撖虫?嚗蒂?? TypeScript ?瑼Ｘ??Vitest 皜祈岫??- ?啣? / ?湔??撘?嚗?  - `src/html/html-to-markdown.ts`
  - `src/html/legacy-html-types.ts`
  - `src/types/anycontent-teaching.ts`
  - `src/types/anycontent-news.ts`
  - `src/types/anycontent-magazine.ts`
  - `src/types/anycontent.ts`
  - `src/adapters/teaching-from-legacy.ts`
  - `src/adapters/news-from-legacy.ts`
  - `src/adapters/magazine-from-legacy.ts`
- ?啣? / ?湔?葫閰行?嚗?  - `tests/html/html-to-markdown.spec.ts`
  - `tests/adapters/teaching-from-legacy.spec.ts`
  - `tests/adapters/news-from-legacy.spec.ts`
  - `tests/adapters/magazine-from-legacy.spec.ts`
- 鈭斗??蝔牧??嚗?  - `docs/WORKFLOW_CHATGPT_GITHUB_WINDSURF.md`
  - `docs/PROJECT_TODO.md`
  - `docs/Windsurf_ChatGPT_NOTES.md`
- ?祆活?瑼Ｘ?葫閰?log嚗?  - `docs/terminal_logs/T-0001_teaching-from-legacy_vitest_fail.txt`
  - `docs/terminal_logs/T-0001_teaching-from-legacy_vitest_pass.txt`
  - `docs/terminal_logs/T-0002_anycontent_types_tsc_pass.txt`
  - `docs/terminal_logs/T-0003_news-from-legacy_vitest_pass.txt`
  - `docs/terminal_logs/T-0004_magazine-from-legacy_tsc_pass.txt`
  - `docs/terminal_logs/T-0004_magazine-from-legacy_vitest_pass.txt`
- 蝯???嚗?  - 撌脫? minimal ???`magazine-from-legacy` adapter ???葫閰佗??賢? legacy HTML + htmlToMarkdownResult 撱箇??箸??`MagazineContent`??  - teaching / news / magazine 銝車 post_type ??adapter 撉冽?賢歇摰?嚗??典?蝥遙?葉?郊鋆?甈? mapping??
---

### T-0005 news-from-legacy: ?? NewsMeta ?交??暺?雿?v1嚗?
- ?格?嚗?  - ?冽??`news-from-legacy` 撉冽銝?撖虫?蝚砌????交??暺?雿?mapping嚗?    霈?`NewsMeta` ?喳??賢‵?乓????暑???/ ?圈????箸鞈???
- ? docs嚗?  - `docs/CONTENT_SCHEMA.md`
    - NewsMeta / NewsContent 畾菔
  - `docs/HTML_TO_MARKDOWN_RULES_V4.md`
    - ??news ??賊???HTML 蝯??? Markdown 閬?嚗??
  - `docs/COMPLETE_PROJECT_WORKFLOW.md`
    - HTML ??Markdown ??AnyContent 瘚?
  - `docs/Windsurf_ChatGPT_NOTES.md`
    - 隢?砌遙????鋆?撖阡?閫???啁?璅???selector

- 閬?啁?瑼?嚗?  - `src/adapters/news-from-legacy.ts`
  - `tests/adapters/news-from-legacy.spec.ts`

- 閬??嚗1 蝭?嚗?
  - 隞亦??撣貉???摰寞?閫????news 璅??箔蜓嚗??舀銝撠??靘??Ｗ?胯?  - 敺?legacy HTML ??htmlToMarkdownResult 銝哨??岫閫??嚗?    - `meta.ct_news_date`
    - `meta.ct_event_date_start`
    - `meta.ct_event_date_end`
    - `meta.ct_event_date_raw`
    - `meta.ct_event_location`
  - ?琿?蝑??Windsurf ?函?撘葉撖虫?銝血 `docs/Windsurf_ChatGPT_NOTES.md` 蝝??靘?嚗?    - ???孵? container / class嚗? `.news-date` / `.article-info`嚗圾??摮?    - ? Markdown 銝剖??整???暺????韌銵??陛?桃?摮葡???  - ?⊥??舫?閫????雿?蝬剜? `null` / ?芸‵嚗????
    - 靘??芣?銝銵?022-03-14??嚗隞亙??‵??`ct_news_date` ??`ct_event_date_start`嚗????notes 銝剛牧??
- ?迂靽格????
  - ?耨??`news-from-legacy.ts` ?扯? `NewsMeta` 甈??賊???頛胯?  - ?臭誑?箸葫閰行憓???fixture / helper嚗?潛?鋆誨銵冽抒? `LegacyHtmlDocument` / `HtmlToMarkdownResult`??  - 銝靽格嚗?    - `NewsMeta` / `NewsContent` ??雿?蝔梯????    - `Language` union?AnyContentBase` 蝯???
- 撽?孵?嚗?  - ?啣? / ?游? `tests/adapters/news-from-legacy.spec.ts`嚗?    - ?喳?? 1?? ?誨銵冽抒? news 皜祈岫獢?嚗閮?交??暺?雿迤蝣箏‵?乓?  - 皜祈岫?誘嚗?    - ?格?嚗?      - `npx vitest tests/adapters/news-from-legacy.spec.ts`
    - ?典?獢?
      - `npx vitest`
  - TypeScript ?瑼Ｘ???嚗?    - `npm run typecheck`嚗摮嚗?    - ??`npx tsc --noEmit`

---

## 雿輻?孵?


---

### T-0006 legacy-data-root: ??鞈??日???CTWORLD_LEGACY_ROOT ?辣??敺???敺??瑁?嚗?
> ???敺?蝡??渲???隞賢?敺??銵??桀????閮極雿??殷?

- 閫貊??嚗?  - 撌脣?銝餅????頂蝯勗?敺??渲?蝡?獢?HTML / ?? / PDF 蝑???
- ?格?嚗?  - ?冽璈??? storage 閮剖? `CTWORLD_LEGACY_ROOT`嚗憓??賂?嚗??箄?蝡???桅???  - 撖阡?瑼Ｚ???瑼????瑽?蝝?瘜????臬撥餈恍?瑽?  - ??docs 銝剜憓?撠?嚗?餈堆?
    - `CTWORLD_LEGACY_ROOT` 撖阡?撠??楝敺?靘??祆? / NAS / S3嚗?    - ?桀???瑼?撖阡????瑽????膩??靘邦???荔???  - ?思?撠?蝡?獢?憭扯?璅⊥蝘餅??孵?嚗?芯??閬?refactor嚗???T 隞餃?????
- ? docs嚗?  - `docs/COMPLETE_PROJECT_WORKFLOW.md`嚗??egacy 鞈?靘????蝭??  - `docs/PROJECT_TODO.md`嚗隞餃?璇?祈澈??  - 嚗?剁??交??閬??舀憓?`docs/LEGACY_DATA_NOTES.md` 蝝?蝝啁???
- 撱箄降靽格瑼?嚗?  - `docs/COMPLETE_PROJECT_WORKFLOW.md`嚗憓??湔銝撠??膩 `CTWORLD_LEGACY_ROOT` ?祕??獢?蝵柴?  - `docs/PROJECT_TODO.md`嚗?閮隞餃?????銝西??祕??撖???閬?  - 嚗?剁?`docs/LEGACY_DATA_NOTES.md`嚗瑼?蝯??孵銴?嚗?冽迨閰唾膩??
- ?迂靽格????
  - ??銝膩 docs嚗?撖虫? pipeline ?⊿????  - 銝???瑼???蝘鳴????甇日?????阡?撠? T 隞餃???
- 撽?孵?嚗?  - [ ] 蝟餌絞銝剖歇閮剖? `CTWORLD_LEGACY_ROOT` 銝西?刻府頝臬?銝??箄?蝡?獢?  - [ ] `docs/COMPLETE_PROJECT_WORKFLOW.md` 銝剖歇?賜??箄?蝡??祕??皞?摮雿蔭??  - [ ] 憒??啣? `docs/LEGACY_DATA_NOTES.md`嚗歇蝪∟?閮??桅?蝯??暹?嚗撘瑁翰??閬???


---

### T-0007 docs-snapshot-cli: 自動產生 docs snapshot ZIP（給 ChatGPT 用）

> 等候執行：自動化產出 docs snapshot ZIP，供 ChatGPT 使用。

- 說明：
  - 在本機 repo 提供一個簡單 CLI / npm script，讓實作 Agent 一鍵產出本次任務的 docs snapshot ZIP。
  - ZIP 輸出到 `snapshots/`，命名遵循 `snapshots/ctworld-docs-T-xxxx-YYYY-MM-DD-vN.zip`，只包含 `docs/*.md` 與 `docs/terminal_logs/*.txt`，不含 `node_modules` / `dist` 等。
- 需參考 docs：
  - `docs/WORKFLOW_CHATGPT_GITHUB_WINDSURF.md` §6
  - `docs/TOOLS_ROLES_AND_BOUNDARIES.md` §2.4
  - `docs/SESSION_CHECKLIST.md`
- 建議修改檔案：
  - `tools/docs-snapshot/` 內新增 CLI（如 `make-docs-snapshot.ts`）
  - `package.json` 新增 script；補充使用說明（如有）可放 `docs/SESSION_CHECKLIST.md` 或 `docs/WORKFLOW_CHATGPT_GITHUB_WINDSURF.md`
- 可修改範圍：
  - `tools/docs-snapshot/*`
  - `package.json`
- 驗收要點：
  - [x] `npm run snapshot:docs -- T-0007`（或 CLI 說明中的參數形式）可在 `snapshots/` 生成 ZIP，例如：
        - `snapshots/ctworld-docs-T-0007-2025-12-09-v1.zip`
  - [x] ZIP 內容僅包含：
        - repo 中的 `docs/*.md`
        - repo 中的 `docs/terminal_logs/*.txt`（如有）
  - [x] 不打包 `node_modules/`、`dist/` 等大型目錄
- 現狀：✅ 已完成（2025-12-09）

1. ?嗡???ChatGPT 閮??箔???嚗?   - ??ChatGPT 撟思??券ㄐ?啣?銝璇?TODO??   - ???Ｙ? / ?湔撠???docs ?爸?嗥?撘Ⅳ??
2. ?嗡?閬漱隞餃?蝯?Windsurf ??
   - ????摰? PROJECT_TODO.md 銝剔洵 X ????摰? T-000X??   - ?府?ㄐ??獢?/ 閬 / ??票蝯?Windsurf??
3. 隞餃?摰?敺?
   - 雿?閮府? ??銝佗??豢??改???撖阡? commit hash ?陛?剛牧??   - ??ChatGPT ?? code review嚗隞亙?ㄐ?酉?歇 review??
雿隞交?蝥雁霅瑟瑼?嚗?摰??箸撠??犖璈?雿?隞餃?蝮質汗??
